{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["'use strict';\nimport axios from \"axios\";\nexport const BASE_URL = 'https://pixabay.com/api/';\nexport const API_KEY = '46311357-e3a4e4c71d54a60b91a510c1d';\n\nexport async function fetchImages(query, page = 1) {\ntry {\n   const response = await axios.get(BASE_URL, {\n    params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: 15 \n    }\n   });\n\n   return response.data;\n} catch (error) {\n    console.log(error);\n    throw error;\n}    \n}\n","'use strict';\nexport function renderImages(images) {\n    const gallery = document.querySelector('.gallery');\n    const markup = images.hits.map(({webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n        return `<li class=\"gallery-query\">\n    <a class=\"gallery-link\" href=\"${largeImageURL}\">\n    <img class=\"gallery-image\"\n    src=\"${webformatURL}\"\n    data-source=\"${largeImageURL}\"\n    alt=\"${tags}\"\n    width=\"360\"  onclick=\"return false\">\n    <ul class=\"gallery-descr\">\n                    <li class=\"gallery-item\">\n                        <p class=\"gallery-item-descr\">Likes</p>\n                        <p class=\"gallery-value\">${likes}</p>\n                    </li>\n                    <li class=\"gallery-item\">\n                        <p class=\"gallery-item-descr\">Views</p>\n                        <p class=\"gallery-value\">${views}</p>\n                    </li>\n                    <li class=\"gallery-item\">\n                        <p class=\"gallery-item-descr\">Comments</p>\n                        <p class=\"gallery-value\">${comments}</p>\n                    </li>\n                    <li class=\"gallery-item\">\n                        <p class=\"gallery-item-descr\">Downloads</p>\n                        <p class=\"gallery-value\">${downloads}</p>\n                    </li>\n                </ul>\n            </a>\n       </li>`;\n    }).join('');\n    gallery.insertAdjacentHTML('beforeend', markup);\n};\n\nexport function showLoader() {\n    const loader = document.querySelector('.loader');\n    loader.classList.remove('visually-hidden');\n}\n\nexport function hideLoader() {\n    const loader = document.querySelector('.loader');\n    loader.classList.add('visually-hidden');\n}\n\nexport function showMore() {\n    const loadMore = document.querySelector('.load-more');\n    loadMore.classList.remove('visually-hidden');\n}\n\nexport function hideMore() {\n    const loadMore = document.querySelector('.load-more');\n    loadMore.classList.add('visually-hidden');\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { fetchImages } from \"./js/pixabay-api\";\nimport { renderImages, showLoader,\n    hideLoader, showMore, hideMore\n } from \"./js/render-function\";\n\n const form = document.querySelector('.form');\n const gallery = document.querySelector('.gallery');\n let lightbox = null;\n let page = 1;\n const perPage = 15;\n const moreBtn = document.querySelector('.load-more');\n \n form.addEventListener('submit', async (event) => {\n     event.preventDefault();\n     \n     const inputValue = form.elements.query.value.trim();\n \n     if(inputValue === '') {\n         iziToast.error({\n             title: '',\n             message: 'Query is invalid! Please enter search parameters!',\n             position: 'topRight'\n         });\n         return;\n     };\n     gallery.innerHTML = '';\n     page = 1; \n\n     try {\n         showLoader();\n         const images = await fetchImages(inputValue, page, perPage);\n         renderImages(images);\n         lightbox = new SimpleLightbox('.gallery a').refresh();\n         hideLoader();\n\n         if(images.hits.length >= perPage) {\n             showMore();\n         }  else {\n             hideMore();\n         } \n \n         if(images.totalHits === 0) {\n             hideLoader();\n             iziToast.error({\n                 title: '',\n                 message: 'Sorry, there are no images matching your search query. Please try again!',\n                 position: 'topRight',\n             });\n \n         }\n     } catch (error) {\n         console.error('Error fetching images', error);\n     iziToast.error({\n         title: '',\n         message: 'Sorry, something went wrong. Please try again!',\n         position: 'topRight',\n     });\n     } finally {\n        hideLoader();\n        form.reset();\n     }\n    \n });\n \n function smoothScroll() {\n     const {height: cardHeight } = document.querySelector('.gallery-query').getBoundingClientRect();\n \n     window.scrollBy({\n         top: cardHeight * 2,\n         behavior: 'smooth',\n     })\n }\n\n moreBtn.addEventListener('click', async () => {\n    page += 1;\n    const inputValue = form.elements.query.value.trim();\n   \n    try {\n        showLoader();\n        const images = await fetchImages(inputValue, page, perPage);\n        renderImages(images);\n        lightbox.refresh();\n\n        hideLoader();\n        smoothScroll();\n\n        if(images.hits.length < perPage) {\n            hideMore();\n            iziToast.info({\n                title: '',\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topRight', \n            });\n        }\n        \n    } catch (error) {\n        console.log(error);\n        iziToast.error({\n            title: '',\n            message: 'Sorry, something went wrong. Please try again!',\n            position: 'topRight',\n        });\n    } finally {\n        hideLoader();\n    }\n });"],"names":["BASE_URL","API_KEY","fetchImages","query","page","axios","error","renderImages","images","gallery","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","showLoader","hideLoader","showMore","hideMore","form","lightbox","perPage","moreBtn","event","inputValue","iziToast","SimpleLightbox","smoothScroll","cardHeight"],"mappings":"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"}